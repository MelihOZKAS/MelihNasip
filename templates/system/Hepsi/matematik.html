<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Süper Eğlenceli Matematik Oyunu</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #E6F3FF;
            font-family: 'Comic Sans MS', cursive;
        }
        .game-container {
            max-width: 100%;
            margin: 1rem auto;
            padding: 1rem;
            background-color: #FFFFFF;
            border-radius: 25px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        #problem {
            font-size: 3rem;
            color: #4A90E2;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            text-align: center;
        }
        .btn-answer {
            font-size: 2rem;
            margin: 15px 0;
            border: none;
            border-radius: 50px;
            padding: 20px 0;
            transition: all 0.3s ease;
            width: 100%;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-answer:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 6px 8px rgba(0,0,0,0.2);
        }
        #result {
            font-size: 2rem;
            font-weight: bold;
            height: 60px;
        }
        .score-container {
            background-color: #FFD700;
            border-radius: 15px;
            padding: 10px;
            font-size: 1.8rem;
            font-weight: bold;
            color: #333;
            display: inline-block;
            min-width: 150px;
        }
        .level-btn {
            font-size: 1.5rem;
            margin: 10px;
            border-radius: 20px;
            transition: all 0.3s ease;
            padding: 10px 20px;
        }
        .level-btn:hover {
            transform: scale(1.1) rotate(-2deg);
        }
        .level-btn.active {
            background-color: #4A90E2;
            color: white;
            transform: scale(1.1);
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-30px);}
            60% {transform: translateY(-15px);}
        }
        .bounce {
            animation: bounce 1s;
        }
        @keyframes rotate {
            0% {transform: rotate(0deg);}
            25% {transform: rotate(-5deg);}
            75% {transform: rotate(5deg);}
            100% {transform: rotate(0deg);}
        }
        .rotate {
            animation: rotate 0.5s ease-in-out;
        }
        @keyframes pulse {
            0% {transform: scale(1);}
            50% {transform: scale(1.05);}
            100% {transform: scale(1);}
        }
        .pulse {
            animation: pulse 0.5s infinite;
        }
        .fade-in {
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .fade-in.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-container">
            <h1 class="text-center mb-4" style="color: #4A90E2;">Süper Eğlenceli Matematik Oyunu</h1>
            <div id="levelSelect" class="text-center mb-4">
                <button class="btn level-btn" data-level="easy">Kolay</button>
                <button class="btn level-btn" data-level="medium">Orta</button>
                <button class="btn level-btn" data-level="hard">Zor</button>
            </div>
            <div id="question" class="text-center mb-4">
                <h2 id="problem" class="mb-3 fade-in">5 + 3 = ?</h2>
            </div>
            <div id="answers" class="d-grid gap-3">
                <button class="btn btn-answer" style="background-color: #FFB347;">12</button>
                <button class="btn btn-answer" style="background-color: #98FB98;">8</button>
                <button class="btn btn-answer" style="background-color: #87CEFA;">10</button>
            </div>
            <div id="result" class="mt-4 text-center"></div>
            <div class="mt-4 text-center">
                <div class="score-container pulse">
                    Puan: <span id="score">0</span>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let score = 0;
        let currentProblem = {};
        let currentLevel = 'easy';

        const levels = {
            easy: { maxNum: 10, operations: ['+'] },
            medium: { maxNum: 20, operations: ['+', '-'] },
            hard: { maxNum: 50, operations: ['+', '-', '*'] }
        };

        function setLevel(level) {
            currentLevel = level;
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-level="${level}"]`).classList.add('active');
            generateProblem();
        }

        document.querySelectorAll('.level-btn').forEach(btn => {
            btn.addEventListener('click', () => setLevel(btn.dataset.level));
        });

        function generateProblem() {
            const level = levels[currentLevel];
            const num1 = Math.floor(Math.random() * level.maxNum) + 1;
            const num2 = Math.floor(Math.random() * level.maxNum) + 1;
            const operation = level.operations[Math.floor(Math.random() * level.operations.length)];
            
            currentProblem = {
                num1: num1,
                num2: num2,
                operation: operation,
                answer: operation === '+' ? num1 + num2 : 
                        operation === '-' ? Math.max(num1, num2) - Math.min(num1, num2) : 
                        num1 * num2
            };

            const problemElement = document.getElementById('problem');
            problemElement.textContent = `${Math.max(num1, num2)} ${operation} ${Math.min(num1, num2)} = ?`;
            problemElement.classList.remove('show');
            setTimeout(() => problemElement.classList.add('show'), 50);

            // Generate answer options
            const answers = [currentProblem.answer];
            while (answers.length < 3) {
                const randomAnswer = Math.floor(Math.random() * (level.maxNum * 2)) + 1;
                if (!answers.includes(randomAnswer)) {
                    answers.push(randomAnswer);
                }
            }
            answers.sort(() => Math.random() - 0.5);

            const answerButtons = document.getElementById('answers').getElementsByTagName('button');
            for (let i = 0; i < answerButtons.length; i++) {
                answerButtons[i].textContent = answers[i];
                answerButtons[i].onclick = function() { checkAnswer(answers[i]); };
                answerButtons[i].classList.add('rotate');
                setTimeout(() => answerButtons[i].classList.remove('rotate'), 500);
            }
        }

        function checkAnswer(userAnswer) {
            const resultDiv = document.getElementById('result');
            const problemDiv = document.getElementById('problem');
            const scoreContainer = document.querySelector('.score-container');

            if (userAnswer === currentProblem.answer) {
                resultDiv.textContent = 'Harika! Doğru cevap!';
                resultDiv.style.color = '#28a745';
                score += 10;
                problemDiv.classList.add('bounce');
                scoreContainer.classList.add('bounce');
                confetti();
            } else {
                resultDiv.textContent = 'Ah, olmadı! Doğru cevap: ' + currentProblem.answer;
                resultDiv.style.color = '#dc3545';
                problemDiv.classList.add('rotate');
            }

            document.getElementById('score').textContent = score;
            setTimeout(() => {
                resultDiv.textContent = '';
                problemDiv.classList.remove('bounce', 'rotate');
                scoreContainer.classList.remove('bounce');
                generateProblem();
            }, 2000);
        }

        function confetti() {
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = ['#FFB347', '#98FB98', '#87CEFA'][Math.floor(Math.random() * 3)];
                confetti.style.position = 'fixed';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.borderRadius = '50%';
                document.body.appendChild(confetti);

                const animation = confetti.animate([
                    { transform: 'translateY(0) rotate(0)', opacity: 1 },
                    { transform: `translateY(100vh) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0,1,1,1)'
                });

                animation.onfinish = () => confetti.remove();
            }
        }

        // İlk soruyu oluştur
        setLevel('easy');
    </script>
</body>
</html>